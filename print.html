<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fuzzer User Guide</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="quick_start_example.html"><strong aria-hidden="true">3.1.</strong> Quick Start Example</a></li></ol></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">4.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fuzzer_configuration_options.html"><strong aria-hidden="true">4.1.</strong> Fuzzer Configuration Options</a></li><li class="chapter-item expanded "><a href="mutator_options.html"><strong aria-hidden="true">4.2.</strong> Mutator Options</a></li><li class="chapter-item expanded "><a href="sanitizer_options.html"><strong aria-hidden="true">4.3.</strong> Sanitizer Options</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fuzzer User Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome to the user guide for fuzzer. This guide is designed to help you understand how to install, configure, and effectively use the fuzzer to test your applications for bugs and vulnerabilities.</p>
<p>The fuzzer is built with flexibility and extensibility in mind, supporting a variety of fuzzing modes, input formats, and advanced features such as coverage-guided fuzzing, corpus management, and comparison logging. Whether you're new to fuzzing or an experienced security researcher, this guide will provide you with the knowledge to utilize the fuzzer to its full potential.</p>
<p>Let's begin by setting up the fuzzer and getting it running on your system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before installing the fuzzer, ensure that you have the following prerequisites installed on your system:</p>
<ul>
<li><strong>Rust and Cargo:</strong> Install Rust and Cargo via rustup.</li>
</ul>
<h2 id="installing-the-fuzzer"><a class="header" href="#installing-the-fuzzer">Installing the Fuzzer</a></h2>
<p>To include the fuzzer in your Rust project, add it as a dependency in your <code>Cargo.toml</code> file:</p>
<pre><code class="language-toml">[dependencies]
fuzzer = { path = &quot;https://github.com/0xb-s/fuzzer&quot; }
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>This section will guide you through setting up and running the fuzzer for the first time. We'll cover the basic steps needed to configure the fuzzer and execute a simple fuzzing session.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>To get started with the fuzzer, you'll need to:</p>
<ol>
<li><strong>Configure the Fuzzer:</strong> Set up the <code>FuzzerConfig</code> with your desired options.</li>
<li><strong>Define Target Functions:</strong> Create one or more functions that the fuzzer will test.</li>
<li><strong>Initialize the Fuzzer:</strong> Create an instance of the <code>Fuzzer</code> and add your target functions.</li>
<li><strong>Run the Fuzzer:</strong> Execute the fuzzing session and monitor progress.</li>
</ol>
<p>In the next section, we'll walk through a quick start example that demonstrates these steps.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-start-example"><a class="header" href="#quick-start-example">Quick Start Example</a></h1>
<p>Let's dive into a simple example to illustrate how to use the fuzzer in your project.</p>
<h2 id="step-1-set-up-the-project"><a class="header" href="#step-1-set-up-the-project">Step 1: Set Up the Project</a></h2>
<p>Create a new Rust project or use an existing one. Ensure that the fuzzer is added to your <code>Cargo.toml</code> dependencies as described in the <a href="./installation.html">Installation</a> section.</p>
<h2 id="step-2-configure-the-fuzzer"><a class="header" href="#step-2-configure-the-fuzzer">Step 2: Configure the Fuzzer</a></h2>
<pre><pre class="playground"><code class="language-rust">use fuzzer::mutator_options::{MutationType, MutatorOptions};
use fuzzer::utils::{FuzzMode, InputFormat};
use fuzzer::{Fuzzer, FuzzerConfig, FuzzerError, TargetFunction};
use std::future::Future;
use std::pin::Pin;
use std::time::Duration;

#[tokio::main]
async fn main() {
    let mutator_options = MutatorOptions {
        mutation_rate: 0.1,
        max_mutations: 5,
        mutation_types: vec![
            MutationType::BitFlip,
            MutationType::ByteFlip,
            MutationType::BlockMutation,
        ],

        ..Default::default()
    };

    let config = FuzzerConfig::builder()
        .input_format(InputFormat::Text)
        .fuzz_mode(FuzzMode::Mutation)
        .timeout(Duration::from_secs(1))
        .max_iterations(1000)
        .seed(42)
        .mutator_options(mutator_options)
        .stop_on_first_crash(false)
        .stats_interval(100)
        .max_input_size(256)
        .min_input_size(1)
        .build();

    let mut fuzzer = Fuzzer::new(config);

    let from_utf8_target =
        |input: &amp;[u8]| -&gt; Pin&lt;Box&lt;dyn Future&lt;Output = Result&lt;(), FuzzerError&gt;&gt; + Send&gt;&gt; {
            let input_owned = input.to_owned();

            Box::pin(async move {
                match std::str::from_utf8(&amp;input_owned) {
                    Ok(valid_str) =&gt; {
                        println!(&quot;Valid UTF-8 string: {}&quot;, valid_str);
                        Ok(())
                    }
                    Err(e) =&gt; Err(FuzzerError::ExecutionError(format!(
                        &quot;from_utf8 error: {}&quot;,
                        e
                    ))),
                }
            })
        };

    let target = TargetFunction::new_async(&quot;FromUtf8&quot;, from_utf8_target);

    fuzzer.add_target(target);

    if let Err(e) = fuzzer.run().await {
        eprintln!(&quot;Fuzzer encountered an error: {}&quot;, e);
    }
}</code></pre></pre>
<h2 id="step-3-run-the-fuzzer"><a class="header" href="#step-3-run-the-fuzzer">Step 3: Run the Fuzzer</a></h2>
<p>Execute your program:</p>
<pre><code>
cargo run
</code></pre>
<p>The fuzzer will start running, generating inputs, mutating them, and feeding them to your target function. It will report progress and any crashes it encounters.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>Configuring the fuzzer allows you to customize its behavior and optimize it for specific testing needs. This section will explain the options available for setting up the fuzzer, including general configuration options, mutator options, and sanitizers.</p>
<p>To configure the fuzzer, you'll use the <code>FuzzerConfig</code> builder pattern. This allows you to chain multiple configuration options and create a customized <code>FuzzerConfig</code> object that controls the behavior of the fuzzing process.</p>
<h2 id="setting-up-the-configuration"><a class="header" href="#setting-up-the-configuration">Setting Up the Configuration</a></h2>
<p>Here's a basic example of how to create and apply configuration settings to the fuzzer:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use fuzzer::FuzzerConfig;
use fuzzer::utils::{FuzzMode, InputFormat};
use std::time::Duration;

let config = FuzzerConfig::builder()
    .input_format(InputFormat::JSON)
    .fuzz_mode(FuzzMode::Mutation)
    .timeout(Duration::from_secs(2))
    .max_iterations(5000)
    .seed(12345)
    .stop_on_first_crash(true)
    .enable_logging(true)
    .save_crashes(true)
    .thread_count(4)
    .build();
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="mutator-options"><a class="header" href="#mutator-options">Mutator Options</a></h1>
<p>The <code>MutatorOptions</code> structure allows you to control how inputs are mutated during the fuzzing process. These options help define the types and frequency of mutations that the fuzzer will apply, enabling you to customize the way inputs evolve and explore potential vulnerabilities in the target function.</p>
<h2 id="setting-up-mutator-options"><a class="header" href="#setting-up-mutator-options">Setting Up Mutator Options</a></h2>
<p>To configure mutation behaviors, create a <code>MutatorOptions</code> instance and pass it to your fuzzer configuration:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use fuzzer::mutator_options::{MutatorOptions, MutationType};

let mutator_options = MutatorOptions {
    mutation_rate: 0.2,
    max_mutations: 10,
    mutation_types: vec![MutationType::BitFlip, MutationType::ByteFlip],
    enable_crossover: true,
    crossover_rate: 0.05,
    block_mutation_size: 16,
    arithmetics_range: 10,
    interesting_values: vec![vec![0x00], vec![0xFF], vec![0x7F]],
    ..Default::default()
};
<span class="boring">}</span></code></pre></pre>
<p>After defining the options, pass mutator_options into the FuzzerConfig:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = FuzzerConfig::builder()
    .mutator_options(mutator_options)
    .build();
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sanitizer-options"><a class="header" href="#sanitizer-options">Sanitizer Options</a></h1>
<p>Sanitizers are tools that help detect various types of bugs and vulnerabilities during runtime by instrumenting code to catch errors such as memory corruption, data races, and undefined behavior. The <code>SanitizerOptions</code> structure lets you enable or disable specific sanitizers to improve the effectiveness of your fuzzing process.</p>
<h2 id="enabling-sanitizers"><a class="header" href="#enabling-sanitizers">Enabling Sanitizers</a></h2>
<p>To activate sanitizers, set <code>sanitizer_enabled</code> to <code>true</code> in your fuzzer configuration. Then, use <code>SanitizerOptions</code> to specify which sanitizers to enable. Here’s an example:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use fuzzer::FuzzerConfig;
use fuzzer::sanitizer_options::SanitizerOptions;

let sanitizer_options = SanitizerOptions {
    address: true,
    thread: false,
    memory: false,
    undefined_behavior: true,
    leak: true,
};

let config = FuzzerConfig::builder()
    .sanitizer_enabled(true)
    .sanitizer_options(sanitizer_options)
    .build();
<span class="boring">}</span></code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
